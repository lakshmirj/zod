pipeline { 
  
   agent { label 'dev' }
   tools {nodejs "nodejs"}

   

   stages {
     stage ('git clone') {
            steps{
                 sh 'rm -rf zod'
                 sh 'git clone https://github.com/lakshmirj/zod.git'
            }
        }
   
     stage('Install Dependencies') { 
        steps { 
           sh 'npm install -g serverless' 
        }
     }
     
     stage ('install serverless'){
            steps {
                sh 'curl -o- -L https://slss.io/install | bash'
                sh 'curl -o- -L https://slss.io/install | VERSION=2.21.1 bash'
                sh 'serverless config credentials --provider aws --key AKIA3NSVBBXX56YXG6OM --secret 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 --profile serverlessUser'
                sh 'cd /data/workspace/zodiac/zod && npm install -g serverless && serverless plugin install --name serverless-s3-sync && serverless plugin install --name serverless-webpack && serverless deploy'
                
                
            }
        }
  
   	}

   }
